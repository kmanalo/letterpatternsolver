<!DOCTYPE html>
<html lang="en">
<head>

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-685209934064589"
crossorigin="anonymous"></script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>5-Letter Word Solver | LetterPatternSolver</title>

<meta name="description" content="Solve Wordle instantly. Enter known letters, include letters, and exclude letters to find matching 5-letter words. Fast and free solver.">

<style>
:root{
  --bg:#eef2f3;
  --card:#ffffff;
  --border:#d0d7dc;
  --text:#12343b;
  --muted:#6b7c80;
  --accent:#1f5a64;
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  padding:20px;
  color:var(--text);
}

.container{
  max-width:520px;
  margin:auto;
}

.card{
  background:var(--card);
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
}

h1{
  margin:0;
  text-align:center;
}

.subtitle{
  text-align:center;
  color:var(--muted);
  margin:6px 0 18px;
}

.box-row{
  display:grid;
  grid-template-columns:repeat(5, minmax(0, 1fr));
  gap:8px;
  margin-bottom:16px;
}

.box{
  width:100%;
  aspect-ratio:1;
  font-size:24px;
  border:2px solid var(--border);
  border-radius:8px;
  text-align:center;
  text-transform:uppercase;
  padding:0;
}

label{
  display:block;
  margin-top:10px;
}

input.text{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid var(--border);
  font-size:16px; /* prevents iOS zoom */
}

.buttons{
  display:flex;
  gap:8px;
  margin-top:12px;
}

button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  color:white;
  font-size:16px;
  font-weight:700;
}

button.secondary{
  background:#fff;
  color:var(--accent);
  border:2px solid var(--border);
}

.results{
  margin-top:16px;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
}

.word{
  padding:8px;
  background:#f0f4f6;
  border-radius:6px;
  text-align:center;
  font-weight:700;
  letter-spacing:1px;
  user-select:none;
  cursor:pointer;
}

.seo{
  margin-top:24px;
  font-size:15px;
  color:var(--muted);
}

.seo h2, .seo h3{
  color:var(--text);
  margin:14px 0 8px;
}

.popular{
  margin-top:10px;
}

.popular a{
  display:block;
  margin:6px 0;
  color:var(--accent);
  text-decoration:none;
  font-weight:600;
}

.popular a:active{
  opacity:0.7;
}

footer{
  margin-top:20px;
  text-align:center;
  font-size:14px;
}

footer a{
  margin:0 8px;
  color:var(--accent);
  text-decoration:none;
}
</style>

</head>
<body>

<div class="container">
<div class="card">

<h1>5-Letter Word Solver</h1>
<div class="subtitle">Find Wordle candidates instantly</div>

<div class="box-row" id="boxes"></div>

<label>Include letters</label>
<input id="include" class="text" placeholder="e.g. re">

<label>Exclude letters</label>
<input id="exclude" class="text" placeholder="e.g. snl">

<div class="buttons">
  <button class="secondary" id="doneBtn" type="button">Done</button>
  <button id="resetBtn" type="button">Reset</button>
</div>

<div id="count" class="subtitle" style="margin-top:14px;">Loading…</div>

<div id="results" class="results"></div>

<div id="status" class="subtitle" style="margin-top:10px;">Loading word lists…</div>

<div class="seo">
  <h2>How to use this solver</h2>
  <p>
    Enter known letters in the boxes above (leave unknowns blank). Add letters that must be included or excluded.
    Results update automatically and can be shared with a link.
  </p>

  <h3>Popular searches</h3>
  <div class="popular">
    <!-- Option B: real, functional links using query parameters -->
    <a href="/?pattern=___er">5 letter words ending in ER</a>
    <a href="/?pattern=s____">5 letter words starting with S</a>
    <a href="/?pattern=__a__">5 letter words with A in the middle</a>
    <a href="/?include=re">5 letter words with R and E</a>
  </div>
</div>

<footer>
  <a href="/privacy.html">Privacy</a>
  <a href="/about.html">About</a>
  <a href="/contact.html">Contact</a>
</footer>

</div>
</div>

<script>
let answers = [];
let allowed = [];
let ready = false;

function parse(t){
  return t
    .split(/\r?\n/)
    .map(x => x.trim().toLowerCase())
    .filter(x => /^[a-z]{5}$/.test(x));
}

function createBoxes(){
  const container = document.getElementById("boxes");
  container.innerHTML = "";

  for(let i=0;i<5;i++){
    const input = document.createElement("input");
    input.className = "box";
    input.maxLength = 1;
    input.autocomplete = "off";
    input.autocapitalize = "characters";
    input.inputMode = "text";
    input.spellcheck = false;

    input.addEventListener("input", () => {
      input.value = (input.value || "")
        .replace(/[^a-zA-Z]/g,"")
        .slice(0,1)
        .toUpperCase();

      // auto-advance
      if(input.value && input.nextElementSibling){
        input.nextElementSibling.focus();
      }

      solve();
    });

    input.addEventListener("keydown", (e) => {
      if(e.key === "Backspace" && !input.value && input.previousElementSibling){
        input.previousElementSibling.focus();
      }
    });

    container.appendChild(input);
  }

  // paste support: paste 5 letters to fill row
  container.addEventListener("paste", (e) => {
    const txt = (e.clipboardData || window.clipboardData).getData("text") || "";
    const paste = txt.toUpperCase().replace(/[^A-Z]/g,"").slice(0,5);
    if(paste.length === 5){
      e.preventDefault();
      const boxes = document.querySelectorAll(".box");
      boxes.forEach((b,i) => b.value = paste[i] || "");
      solve();
    }
  }, { passive:false });
}

function getPattern(){
  return [...document.querySelectorAll(".box")]
    .map(b => b.value ? b.value.toLowerCase() : "_")
    .join("");
}

function setPattern(patRaw){
  const pat = (patRaw || "")
    .toLowerCase()
    .replace(/[^a-z_]/g,"")
    .padEnd(5,"_")
    .slice(0,5);

  const boxes = document.querySelectorAll(".box");
  for(let i=0;i<5;i++){
    boxes[i].value = (pat[i] === "_" ? "" : pat[i].toUpperCase());
  }
}

function hasConstraints(pattern, include, exclude){
  return pattern !== "_____" || include.length > 0 || exclude.length > 0;
}

function updateUrl(pattern, include, exclude){
  // Keep shareable links without reloading
  const url = new URL(window.location.href);

  if(!hasConstraints(pattern, include, exclude)){
    url.search = "";
    history.replaceState({}, "", url.toString());
    return;
  }

  url.searchParams.set("pattern", pattern);
  if(include) url.searchParams.set("include", include);
  else url.searchParams.delete("include");

  if(exclude) url.searchParams.set("exclude", exclude);
  else url.searchParams.delete("exclude");

  history.replaceState({}, "", url.toString());
}

function solve(){
  if(!ready) return;

  const pattern = getPattern();
  const include = (document.getElementById("include").value || "").toLowerCase().replace(/[^a-z]/g,"");
  const exclude = (document.getElementById("exclude").value || "").toLowerCase().replace(/[^a-z]/g,"");

  updateUrl(pattern, include, exclude);

  if(!hasConstraints(pattern, include, exclude)){
    document.getElementById("results").innerHTML = "";
    document.getElementById("count").innerText = "Enter letters to search";
    return;
  }

  const words = [...new Set([...answers, ...allowed])];

  const filtered = words.filter(w => {
    for(let i=0;i<5;i++){
      if(pattern[i] !== "_" && pattern[i] !== w[i]) return false;
    }
    for(const c of include){
      if(!w.includes(c)) return false;
    }
    for(const c of exclude){
      if(w.includes(c)) return false;
    }
    return true;
  }).sort();

  document.getElementById("count").innerText = `${filtered.length} viable words`;

  const div = document.getElementById("results");
  div.innerHTML = "";

  // cap for UI sanity
  filtered.slice(0, 300).forEach(w => {
    const el = document.createElement("div");
    el.className = "word";
    el.innerText = w.toUpperCase();
    el.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(w);
        document.getElementById("status").innerText = `Copied ${w.toUpperCase()} to clipboard.`;
        setTimeout(() => {
          document.getElementById("status").innerText = "Ready";
        }, 1200);
      }catch{
        // ignore clipboard failures
      }
    });
    div.appendChild(el);
  });
}

function clearAll(){
  document.querySelectorAll(".box").forEach(b => b.value = "");
  document.getElementById("include").value = "";
  document.getElementById("exclude").value = "";
  document.getElementById("results").innerHTML = "";
  document.getElementById("count").innerText = "Enter letters to search";

  const url = new URL(window.location.href);
  url.search = "";
  history.replaceState({}, "", url.toString());
}

function dismissKeyboard(){
  document.activeElement?.blur();
  const results = document.getElementById("results");
  if(results && results.children.length > 0){
    results.scrollIntoView({ behavior:"smooth", block:"start" });
  }
}

function applyParamsFromUrl(){
  const sp = new URLSearchParams(window.location.search);
  const pat = sp.get("pattern");
  const inc = sp.get("include");
  const exc = sp.get("exclude");

  if(pat) setPattern(pat);
  if(typeof inc === "string") document.getElementById("include").value = inc;
  if(typeof exc === "string") document.getElementById("exclude").value = exc;
}

async function load(){
  try{
    const a = await fetch("/data/answers.txt", { cache:"no-store" });
    const b = await fetch("/data/allowed.txt", { cache:"no-store" });

    answers = parse(await a.text());
    allowed = parse(await b.text());

    ready = true;
    document.getElementById("status").innerText = "Ready";

    createBoxes();
    applyParamsFromUrl();

    // Do not dump full list at load unless params actually constrain
    solve();
  }catch(e){
    document.getElementById("status").innerText = "Failed to load word lists.";
    document.getElementById("count").innerText = "Error";
  }
}

document.getElementById("include").addEventListener("input", solve);
document.getElementById("exclude").addEventListener("input", solve);

document.getElementById("resetBtn").addEventListener("click", clearAll);
document.getElementById("doneBtn").addEventListener("click", dismissKeyboard);

load();
</script>

</body>
</html>
